# CHAPTER4
## _결과를 전달하는 HTTP 상태 코드_
![image](https://user-images.githubusercontent.com/52441697/179323231-14e25fe5-2a92-4429-9b07-abcdaaf1abdd.png)

- 💡 상태 코드
<br>

## 📑 상태 코드

클라이언트가 서버로 리퀘스트를 보냈을 때 서버에서 그 결과가 어떻게 처리되었는 지를 알려주는 것이 `Status Codes(상태 코드)`의 역할이다. 이를 통해서 서버가 리퀘스트를 정상적으로 처리했는지 아니면 에러가 발생했는지를 클라이언트에서 알 수 있다.

HTTP 명세에 따르면, **상태 코드**는 3자리 숫자와 그에 대한 설명을 나타내는데 팀 내부적으로 3자리 이상의 숫자를 커스텀해서 사용할 수도 있다.

상태 코드는 첫 번째 자리의 숫자로 의미를 구분한다.

| |클래스|설명|
|------|---|---|
|`1XX`|Information|리퀘스트를 받아 처리중|
|`2XX`|Success|리퀘스트를 정상적으로 처리 완료|
|`3XX`|Redirection|리퀘스트를 완료하기 위해 추가 동작이 필요|
|`4XX`|Client Error|서버가 해석할 수 없는 리퀘스트를 의미|
|`5XX`|Server Error|서버에서 리퀘스트 처리 실패|

> 🔔 리스폰스로 돌아오는 상태 코드의 대부분은 사용자가 다른 내용을 알기 어렵게 되어 있다. 흔히 있는 상황으로 웹 앱에서 에러가 발생한 경우에도 상태 코드로는 `200 OK`가 돌아오는 경우가 있다. 즉, **상태 코드가 실제 상황과 불일치할 수 있다**는 의미이다.

<br>

## 📑 1XX 정보(Information)

`1XX` 상태 코드는 서버가 리퀘스트를 받았으며, 서버에 연결된 클라이언트는 작업을 계속 진행하라는 의미이다. 해당 코드는 HTTP 1.0에서 지원되지 않는다.

### ◽ 100 Continue

진행 중임을 의미하는 상태 코드이다. 현재까지의 진행 상태에 문제가 없으며 클라이언트가 계속해서 리퀘스트를 보내거나 이미 리퀘스트를 완료한 경우에는 무시해도 되는 것을 알려준다.

### ◽ 101 Switching Protocol

클라이언트에 의해 보낸 업그레이드 리퀘스트 헤더에 대한 리스폰스로 보내진다. 이 상태 코드는 클라이언트가 보낸 업그레이드 리퀘스트 헤더에 대한 리스폰스에 들어가며 서버에서 프로토콜을 변경할 것임을 알려준다. 해당 코드는 Websocket 프로토콜 전환 시에 사용된다.

### ◽ 102 Processing(WebDAV)

서버가 리퀘스트를 수신했으며 이를 처리하고 있지만 아직 제대로 된 리스폰스를 알려줄 수 없음을 의미한다.

<br>

## 📑 2XX 성공(Success)

`2XX` 상태 코드는 서버가 리퀘스트를 정상적으로 처리했다는 것을 의미한다.

### ◽ 200 OK

클라이언트가 보낸 리퀘스트를 서버가 정상 처리했다는 것을 나타내고, 리퀘스트 메소드에 따라 리스폰스 본문은 달라진다.

예를 들어, `GET` 메소드 경우에는 리퀘스트에 대응하는 엔티티가 리스폰스로 보내진다.

### ◽ 204 No Content

서버가 리퀘스트를 정상적으로 처리했지만 리스폰스 메시지에 엔티티 바디를 포함하지 않는다는 것을 의미하며 클라이언트에 보낼 새로운 정보가 없을 경우에 사용된다.

### ◽ 206 Partial Content

Range 헤더를 가진 `GET` 리퀘스트를 받았다는 것을 의미함과 동시에, Range 헤더에 의해서 지정된 범위에 해당하는 리소스를 엔티티 바디로 응답했다는 것을 의미한다.

<br>

## 📑 3XX 리다이렉트(Redirection)

`3XX` 상태 코드는 리퀘스트를 정상적으로 완료하기 위해서 브라우저 측에 추가적인 처리가 필요함을 의미한다.

### ◽ 301 Moved Permanently

리퀘스트에 대응하는 리소스가 다른 URI로 이동했으므로, 해당 리소스를 참조하기 위해서는 변경된 URI로 리퀘스트를 다시 보내야 한다는 것을 의미한다.

`301` 상태 코드를 받은 브라우저는 Location 리스폰스 헤더를 참고해서 다시 리퀘스트를 보낸다.

```
HTTP/1.1 301 Moved Permanently
Location: http://www.something.com/index.html
```

### ◽ 302 Found

`301` 상태 코드와 유사하게 리소스에 새로운 URI가 할당되었음을 의미하지만, 일시적인 이동임을 나타낸다. 또한, `302` 상태 코드도 브라우저가 Location 리스폰스 헤더를 참고해서 다시 리퀘스트를 보낸다.

굳이 일시적인 이동인 것을 나타내는 이유는 검색 엔진(봇)에서 새로운 URI로 링크를 갱신하지 않게 하기 위함이다.

### ◽ 303 See Other

리퀘스트에 대한 리소스가 다른 URI에 있기 때문에 반드시 `GET` 메소드를 사용해서 리퀘스트해야 한다는 것을 의미한다. `302` 상태 코드와 유사하지만, 리다이렉트 장소에 `GET` 메소드로 리퀘스트해야 한다는 것을 명확하게 지정한다.

예를 들어, 어떠한 작업을 `POST` 메소드로 처리하고 결과를 별도의 URI에서 `GET` 메소드로 리다이렉트 시키고 싶은 경우 `303` 상태 코드를 사용한다.

### ◽ 304 Not Modified

클라이언트가 조건부 리퀘스트한 경우에 리소스에 대한 접근은 허락하지만, 조건이 충족되지 않았음을 의미한다.

주로 캐시에서 `If-None-Match` 또는 `If-Modified-Since` 헤더에 대한 리스폰스에 사용되고, 반드시 리스폰스 엔티티 바디에 아무 것도 포함해선 안된다.

### ◽ 307 Temporary Redirect

`302` 상태 코드와 같은 의미지만, 메소드가 변경되지 않고 Location 리스폰스 헤더로 리다이렉트한다.

<br>

## 📑 4XX 클라이언트 에러(Client Error)

`4XX` 상태 코드는 클라이언트의 원인으로 에러가 발생했다는 것을 의미한다.

### ◽ 400 Bad Request

리퀘스트 구문이 잘못 되었다는 것을 의미한다.

`400` 상태 코드를 받으면, 리퀘스트 내용을 다시 검토해 다시 보낼 필요가 있다. 브라우저는 이에 대한 대응을 따로 하지 않는다.

### ◽ 401 Unauthorized

리퀘스트 메세지에 HTTP 인증 정보가 필요하다는 것을 의미한다.

`401` 상태 코드는 리소스를 얻기 위해 필요한 인증 정보를 `WWW-Authenticate` 헤더에 포함해 전달한다.

```
HTTP/1.1 401 Unauthorized 
Date: Fri, 23 Oct 2009 11:32:20 GMT
WWW-Authenticate: Basic realm="Access to staging site"
```

### ◽ 403 Forbidden

요청한 리소스의 접근이 권한 때문에 거부되었다는 것을 의미한다.

리소스에 대한 접근 거부 이유에 대해서는 엔티티 바디에 전달할 수 있는데, 반드시 이유를 전달하는 것을 권장한다.

### ◽ 404 Not Found

요청한 리소스가 서버 상에 없다는 것을 의미한다.

`404` 상태 코드를 서버 측에서 해당 리퀘스트에 대해 거부하는 경우에도 사용할 수 있는데, 이러한 경우에는 클라이언트 입장에서는 `Not Found` 의미와 다르기 때문에 헷갈리게 하는 구석이 있다.

이러한 모호함을 해소하기 위해서는 엔티티 에 거부 이유를 명확하게 기재하는 것을 권장한다.

만약 리소스가 영구적으로 삭제되었다는 의미를 나타내기 위해서는 `404` 상태 코드가 아닌 `410(Gone)` 상태 코드를 사용해야 한다.

<br>

## 📑 5XX 서버 에러(Server Error)

`5XX` 상태 코드는 서버 원인으로 에러가 발생하고 있음을 의미한다.

### ◽ 500 Internal Server Error

서버에서 리퀘스트를 처리하는 도중에 예기치 못한 에러가 발생했다는 것을 의미한다.

`500` 에러는 서버 에러를 총칭하는 의미이기 때문에 이유가 될만한 구체적인 내용은 엔티티 바디에 포함하는 것을 권장한다.

### ◽ 503 Service Unavaliable

일시적으로 서버가 과부하 상태이거나 점검중이기 때문에 현재 리퀘스트를 처리할 수 없다는 것을 의미한다. 즉, 서버가 리퀘스트를 처리할 준비가 되지 않았음을 나타낸다.

또한, 서비스 복구하기 위한 예상 시간을 `Retry-After` 응답 헤더에 전달하는 것을 권장한다.

<br>

<hr>
참조 : 
https://developer.mozilla.org/ko/docs/Web/HTTP/Status
https://velog.io/@koseungbin/Status-Code
