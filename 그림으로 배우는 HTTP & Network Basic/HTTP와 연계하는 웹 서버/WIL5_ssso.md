> 📂 웹 서버 </br>
📑 가상 호스트 </br>
📑 중계 프로그램 </br>
     📌 프록시, 게이트웨이, 터널 </br>
📑 캐시 </br>

</br>

## 📑 가상 호스트 (1대로 멀티 도메인)

- HTTP/1.1에서 하나의 HTTP 서버에 여러 웹 사이트를 실행할 수 있음
- ex) 웹 호스팅을 제공하는 사업자는 1대의 서버에 여러 고객의 웹 사이트를 넣을 수 있음. 고객마다 다른 도메인을 갖고 다른 웹 사이트를 실행할 수 있음. → 이를 위해 가상 호스트 기능 사용
- 가상 호스트(Virtual Host): 서버 1대에 가상으로 다른 웹 사이트를 실행하는 것

</br>

## 📑 통신을 중계하는 프로그램: 프록시, 게이트웨이, 터널

- HTTP는 클라이언트와 서버 외에 프록시, 게이트웨이, 터널과 같은 통신을 중계하는 프로그램과 서버를 연계하는 것도 가능
- 이런 중계 프로그램과 서버는 다른 서버에게 request를 중계하고 response를 받아서 클라이언트에 반환

</br>

### 📌 프록시

- 서버와 클라이언트 양쪽 역할을 하는 중계 프로그램
- 클라이언트 ← Request (프록시) → 서버 → Response (프록시) → 클라이언트

✅ **기본 동작**

- 클라이언트로부터 받은 request를 다른 서버에 전송하는 것 (이때 받은 request URI를 변경x, 서버에 전송)
- 오리진 서버: 리소스 본체를 가진 서버
- 오리진 서버로부터 온 response는 프록시 서버를 경유해서 클라이언트에 돌아옴
- 프록시 서버를 여러 대 경유하는 경우 여러 대 경유해서 중계하며, 이 때 `Via` 헤더 필드에 경유한 호스트 정보 추가 필요

**✅ 사용 이유**

- 캐시를 사용해서 네트워크 대역 등을 효율적으로 사용
- 조직 내에 특정 웹 사이트에 대한 액세스 제한
- 액세스 로그 획득하는 정책 지키기 위해

**✅ 사용 방법**

1. 캐싱 프록시
    - 프록시로 response 중계할 때 서버 상에 리소스 캐시를 보존해 두는 프록시
    - 프록시에 같은 리소스에 Request가 온 경우, 오리진 서버로부터 리소스를 획득X, 캐시를 되돌려줌
2. 투명 프록시
    - 프록시로 request, response를 중계할 때 메시지 변경을 하지 않는 프록시.
    - 비투과 프록시: 메시지에 변경을 가하는 타입의 프록시

</br>

### 📌 게이트웨이

- 다른 서버를 중계하는 서버
- 클라이언트로부터 수신한 Request를 리소스를 보유한 서버인 것처럼 수신
- 경우에 따라 클라이언트는 상대가 게이트웨이인 걸 모르기도 함

```jsx
게이트웨이 vs. 라우터 

라우터는 주로 LAN과 WAN을 연결(layer3)하는데 많이 사용되며, 
게이트웨이는 프로토콜이 다른 네트워크를 연결(layer4)할 때 주로 사용한다. 
요즘에는 라우터와 게이트웨이 기능이 같이 있는 장비를 많이 사용하는 추세이다.
```

### 📌 터널

- 서로 떨어진 두 대의 클라이언트와 서버 사이를 중계하며 접속을 주선하는 중계 프로그램 → 즉 터널을 사용하여 서버와 안전하게 통신할 수 있음
- 이 때 클라이언트는 SSL같은 암호화 통신을 통해 서버와 안전하게 통신 위해 사용
    
    ```jsx
    SSL : 보안 소켓 계층 (Secure Sockets Layer)
    웹사이트와 브라우저 사이에 전송되는 데이터를 암호화하여 인터넷 연결을 보호하기 위한 기술
    ```
    
</br>

## 📑 캐시 (리소스 보관)

캐시(Cache): 프록시 서버와 클라이언트의 로컬 디스크에 보관된 리소스의 사본

- 캐시를 사용해 리소스 가진 서버에의 액세스 줄여 통신량 및 시간을 절약할 수 있음

### 📌 캐시 서버

- 프록시 서버의 하나로 캐싱 프록시로 분류
- 프록시가 서버로부터의 response 를 중계할 때 프록시 서버 상에 리소스의 사본을 보존함
- 장점: 캐시를 이용해 같은 데이터를 몇 번이고 오리진 서버에 전송할 필요가 없음

**캐시의 유효기간**

- 캐시 서버에 캐시가 있어도 같은 리소스의 request에 대해 항상 캐시를 돌려주진 않음 → 캐시되어 있는 `리소스의 유효성`과 관련.
- 같은 캐시 오래 사용 → 오리진 서버에 있는 원래 리소스 갱신 → 캐시 서버는 갱신 전의 리소스 그대로 보냄 → 캐시를 갖고 있더라도 클라이언트의 요구/ 캐시의 유효 기간에 의해 유효성을 확인하거나 새로운 리소스 획득하는 경우 있음

**클라이언트측의 캐시**

- 캐시 서버뿐만 아니라 클라이언트가 사용하는 브라우저에서도 캐시 가질 수 있음 (ex. IE에서 클라이언트가 보존하는 캐시를 인터넷 임시 파일이라고 부름)
- 브라우저가 유효한 캐시를 갖고 있는 경우, 같은 리소스의 액세스는 서버에 액세스하지 않고 로컬 디스크로부터 불러옴
- 캐시 서버와 마찬가지로 오래되면 리소스 유효성 확인/ 재획득하는 경우 있음
